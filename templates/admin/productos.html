<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Productos</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/productos.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<header>
    <h1>Gestión de Productos</h1>
    <a href="{{ url_for('admin_panel') }}">⬅ Volver al panel</a>
</header>

<main class="contenedor">
    <!-- ================= PRODUCTOS ================= -->
    <section>
        <h2> Agregar Producto</h2>

        <form method="POST"
              action="{{ url_for('crear_producto') }}"
              enctype="multipart/form-data">

            <input type="text" name="nombre" placeholder="Nombre del producto" required>
            <input type="number" name="precio" placeholder="Precio" required>
            <input type="number" name="numero_bolas" placeholder="Número de bolas" required>

            <label class="file-upload">
                Subir imagen
                <input type="file" name="imagen" accept="image/*" onchange="mostrarNombre(this)">
            </label>

            <span class="nombre-imagen">Ningún archivo seleccionado</span>


            <textarea name="descripcion" placeholder="Descripción"></textarea>

            <button type="submit">Guardar Producto</button>
        </form>

        <h3> Productos registrados</h3>
        <table>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Nº Bolas</th>
            </tr>
            {% for p in productos %}
            <tr>
                <td>{{ p.Id_producto }}</td>
                <td>{{ p.Nombre_producto }}</td>
                <td>${{ p.Precio_producto }}</td>
                <td>{{ p.Numero_bolas }}</td>
            </tr>
            {% endfor %}
        </table>
    </section>

    <!-- ================= SABORES ================= -->
    <section>
        <h2> Agregar Sabor</h2>

        <form method="POST"
              action="{{ url_for('crear_sabor') }}"
              enctype="multipart/form-data">

            <input type="text" name="nombre" placeholder="Nombre del sabor" required>

            <label class="file-upload">
                Subir imagen
                <input type="file" name="imagen" accept="image/*" onchange="mostrarNombre(this)">
            </label>

            <span class="nombre-imagen">Ningún archivo seleccionado</span>

            <textarea name="descripcion" placeholder="Descripción"></textarea>

            <button type="submit">Guardar Sabor</button>
        </form>

        <h3> Sabores existentes</h3>
        <ul>
            {% for s in sabores %}
                <li>{{ s.Nombre_sabor }}</li>
            {% endfor %}
        </ul>
    </section>

    <!-- ================= TOPPINGS ================= -->
    <section>
        <h2> Agregar Topping</h2>

        <form method="POST"
              action="{{ url_for('crear_topping') }}"
              enctype="multipart/form-data">

            <input type="text" name="nombre" placeholder="Nombre del topping" required>
            <label class="file-upload">
                Subir imagen
                <input type="file" name="imagen" accept="image/*" onchange="mostrarNombre(this)">
            </label>

            <span class="nombre-imagen">Ningún archivo seleccionado</span>

            <button type="submit">Guardar Topping</button>
        </form>

        <h3> Toppings existentes</h3>
        <ul>
            {% for t in toppings %}
                {% if t.Nombre_toppings != 'Sin topping' %}
                    <li>{{ t.Nombre_toppings }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    </section>

</main>
<script>
function mostrarNombre(input) {
    const texto = input.files.length > 0
        ? "Imagen seleccionada: " + input.files[0].name
        : "Ningún archivo seleccionado";

    input.parentElement.nextElementSibling.textContent = texto;
}
</script>
<!-- BOTÓN VOLVER AL PANEL -->
{% if session['usuario_tipo'] == 1 %}
    <a href="{{ url_for('admin_panel') }}" class="button-volver">← Volver al Panel</a>
{% elif session['usuario_tipo'] == 2 %}
    <a href="{{ url_for('panel_trabajadores') }}" class="button-volver">← Volver al Panel</a>
{% endif %}

</body>
</html>
