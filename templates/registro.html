<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/registro.css') }}">
</head>
<body>
    <div class="wrapper">
        <h1>Registro</h1>
        
        <div class="input-box">
            <input type="text" id="nombre" placeholder="Nombre completo" required>
            <i class="fas fa-user"></i>
        </div>
        
        <div class="input-box">
            <input type="email" id="email" placeholder="Correo electrónico" required>
            <i class="fas fa-envelope"></i>
        </div>
        
        <div class="input-box password-container">
            <input type="password" id="contrasena" placeholder="Contraseña" required>
            <i class="fas fa-lock"></i>
            
        </div>
        
        <div class="input-box password-container">
            <input type="password" id="confirmar-contrasena" placeholder="Confirmar contraseña" required>
            <i class="fas fa-lock"></i>
            
        </div>
        
        <button class="btn" type="submit" onclick="registro()">Registrarse</button>
        
        <div class="register-link">
            <p>¿Ya tienes una cuenta? <a href="/login">Iniciar Sesion</p>
        </div>
    </div>

    <script>
function registro() {
    const nombre = document.getElementById('nombre').value;
    const email = document.getElementById('email').value;
    const contrasena = document.getElementById('contrasena').value;
    const confirmarContrasena = document.getElementById('confirmar-contrasena').value;

    if (contrasena !== confirmarContrasena) {
        alert('Las contraseñas no coinciden');
        return;
    }

    const datos = {
        nombre_completo: nombre,
        correo: email,
        contrasena: contrasena,
        confirmar_contrasena: confirmarContrasena
    };

    fetch('/registro', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(datos)
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            alert('Error: ' + data.error);
        } else {
            alert('Usuario registrado exitosamente: ID ' + data.id_usuario);
            window.location.href = '/login';
        }
    })
    .catch(error => {
        console.error('Error en la petición:', error);
        alert('Hubo un error al registrarse');
    });
}
</script>

</body>
</html>